# SGLang Korean Token Limiter - Python 3.10 Requirements
# ========================================================
# 이 파일은 Python 3.10 환경에서 테스트되었습니다
# 설치 방법: pip install -r requirements.txt

# ============================================================================
# 1. 핵심 Deep Learning 프레임워크
# ============================================================================

# PyTorch (CUDA 12.1 지원) - SGLang 호환 버전
torch==2.1.0
torchvision==0.16.0
torchaudio==2.1.0

# NumPy (1.x 버전 - NumPy 2.x 호환성 문제 방지)
numpy==1.24.4

# ============================================================================
# 2. Transformers 및 모델 라이브러리
# ============================================================================

# HuggingFace Transformers
transformers==4.36.0
tokenizers==0.15.0
accelerate==0.25.0
safetensors==0.4.1

# 모델 최적화
sentencepiece==0.1.99
protobuf==4.25.1

# ============================================================================
# 3. SGLang 및 관련 라이브러리
# ============================================================================

# SGLang 메인 프레임워크
sglang==0.2.6

# Outlines (SGLang 호환 버전)
outlines==0.0.44

# Outlines 의존성 (수동 설치)
interegular==0.3.3
jinja2==3.1.6
lark==1.2.2
nest-asyncio==1.6.0
cloudpickle==3.1.1
diskcache==5.6.3
referencing==0.36.2
jsonschema==4.25.0

# ============================================================================
# 4. 웹 서버 및 API
# ============================================================================

# FastAPI 스택
fastapi==0.104.1
uvicorn[standard]==0.24.0
httpx==0.25.2
pydantic==2.5.0
pydantic-settings==2.1.0

# 스트리밍 및 실시간 통신
sse-starlette==1.6.5
websockets==12.0
python-multipart==0.0.6

# 추가 웹 유틸리티
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4

# ============================================================================
# 5. 데이터 저장소 및 캐시
# ============================================================================

# Redis
redis==5.0.1

# SQLite (비동기)
aiosqlite==0.19.0

# ============================================================================
# 6. 설정 관리 및 유틸리티
# ============================================================================

# 설정 파일 처리
PyYAML==6.0.1
python-dotenv==1.0.0
click==8.1.7

# 시스템 모니터링
psutil==5.9.6

# 로깅 및 구조화
structlog==23.2.0
rich==13.7.0

# ============================================================================
# 7. 대시보드 및 시각화
# ============================================================================

# Streamlit 대시보드
streamlit==1.28.2

# 데이터 시각화
plotly==5.17.0
pandas==2.1.4

# ============================================================================
# 8. 한국어 처리 (선택사항)
# ============================================================================

# 한국어 텍스트 처리
hanja==0.15.1
kss==4.5.4

# ============================================================================
# 9. 개발 및 테스트 도구 (선택사항)
# ============================================================================

# Jupyter 환경
jupyter==1.0.0
notebook==7.0.6
ipykernel==6.26.0
ipywidgets==8.1.1

# 테스트 프레임워크
pytest==7.4.3
pytest-asyncio==0.21.1
pytest-mock==3.12.0

# 코드 품질
black==23.11.0
flake8==6.1.0
isort==5.12.0
mypy==1.7.1

# ============================================================================
# 10. 성능 최적화 (GPU 환경용 - 선택사항)
# ============================================================================

# GPU 모니터링
nvidia-ml-py3==7.352.0
pynvml==11.5.0

# SGLang 성능 최적화 (설치 실패해도 무관)
# flashinfer==0.0.5  # --no-build-isolation 필요
# triton==2.1.0      # CUDA 환경에서만
# xformers==0.0.22.post7  # 메모리 최적화

# ============================================================================
# 11. 추가 유틸리티
# ============================================================================

# HTTP 요청
requests==2.32.4
urllib3==2.2.4

# 진행률 표시
tqdm==4.67.1

# 날짜/시간 처리
python-dateutil==2.9.0

# 데이터 검증
marshmallow==3.22.0

# 메모리 캐시
cachetools==5.5.0

# ============================================================================
# 버전 호환성 참고사항
# ============================================================================
# 
# 1. Python 3.10 전용으로 최적화됨
# 2. CUDA 12.1 지원 (GPU 사용 시)
# 3. NumPy 2.x 호환성 문제 방지를 위해 1.24.4 고정
# 4. SGLang 0.2.6과 Outlines 0.0.44 호환성 확인됨
# 5. vLLM은 제외 (SGLang과 충돌)
# 
# 설치 순서 (권장):
# 1. pip install --upgrade pip wheel setuptools
# 2. pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
# 3. pip install -r requirements.txt
# 
# GPU 성능 최적화 패키지는 별도 설치:
# pip install flashinfer==0.0.5 --no-build-isolation
# pip install triton==2.1.0
